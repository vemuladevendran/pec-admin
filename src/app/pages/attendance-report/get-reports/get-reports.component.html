<div class="container-fluid">
    <form class="row d-print-none" [formGroup]="filtersForm" (ngSubmit)="getReportDetails()">
        <!-- filters -->
        <div class="col-12 col-md-3">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>From</mat-label>
                <input matInput [matDatepicker]="picker" [max]="maxDate" formControlName="from">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </div>
        <div class="col-12 col-md-3">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>To</mat-label>
                <input matInput [matDatepicker]="picker1" [max]="maxDate" formControlName="to">
                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                <mat-datepicker #picker1></mat-datepicker>
            </mat-form-field>
        </div>
        <div class="col-12 col-md-3">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Year</mat-label>
                <mat-select formControlName="year">
                    <mat-option value="firstYear">First Year </mat-option>
                    <mat-option value="secondYear">Second Year </mat-option>
                    <mat-option value="thirdYear">Third Year </mat-option>
                    <mat-option value="fourthYear">Fourth Year </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="col-12 col-md-3">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Absent count</mat-label>
                <input matInput placeholder="Absent count" min="0" type="number" formControlName="count" />
            </mat-form-field>
        </div>
        <!-- button -->
        <div class="text-end">
            <button class="btn btn-primary btn-sm rounded shadow m-0 text-white ms-2" [disabled]="filtersForm.invalid">
                Get reports
            </button>
        </div>
    </form>
    <!-- print report form -->
    <div class="row">
        <h2 class="text-center">PANIMALAR ENGINEERING COLLEGE</h2>
        <h4 class="text-center fw-bold">ATTENDANCE REPORT</h4>
        <hr>
        <div class="col-4 d-flex">
            <div> <span class="fw-bold"> From: </span>
                <p>{{filtersForm.value.from | date}}</p>
            </div>
            <div class="ms-3">
                <span class="fw-bold"> TO: </span>
                <p>{{filtersForm.value.to | date}}</p>
            </div>
        </div>
        <div class="col-4 fw-bold text-uppercase">{{userDetails?.department}}</div>
        <div class="col-2 fw-bold text-uppercase">{{filtersForm.value.year}}</div>
        <div class="col-2">More than <span class="fw-bold">{{filtersForm.value.count}}</span> Absent</div>
        <hr>
    </div>
    <div class="text-end mb-3" *ngIf="studentsDetails.length > 0"><button class="btn btn-primary d-print-none" (click)="print()">Print the report</button></div>
    <!-- table details -->
    <div *ngIf="studentsDetails.length === 0" class="text-center fw-bold">No students found</div>
    <div *ngIf="studentsDetails.length > 0">
        <table class="table table-striped border border-dark">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Name</th>
                    <th scope="col">Exam number</th>
                    <th class="text-center" scope="col">Number of days Absent</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let s of studentsDetails; index as i">
                    <th scope="row">{{i+1}}</th>
                    <td>{{studentsName[i]?.studentName}}</td>
                    <td>{{s.examNumber}}</td>
                    <td class="text-center">{{s.totalAbsentCount}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>